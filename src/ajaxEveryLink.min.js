window.AEL={Request:new XMLHttpRequest,urlSeparator:"/",onLoad:function(){console.debug("ajaxEveryLink is loading...")},onNotify:function(e){alert("Notify: "+e)},getHistory:function(){return"false"==localStorage.__AEL__isHistory?!1:JSON.parse(localStorage.__AEL__History)},isHistoryEnabled:function(){return"true"==localStorage.__AEL__isHistory?!0:!1},historyEnabled:function(e){localStorage.__AEL__isHistory=Boolean(e)},clearHistory:function(){localStorage.__AEL__History="[]"},init:function(){function e(e){var t=JSON.parse(localStorage.__AEL__History);t.push(e),localStorage.__AEL__History=JSON.stringify(t)}function t(){for(i in window)window.__AEL__globalVars[i]||(window[i]=void 0)}function o(){for(var e=window.setInterval("",9999),t=1;e>t;t++)window.clearInterval(t)}function r(r){a.onLoad(),a.Request.onreadystatechange=function(){if(a.Request.readyState==XMLHttpRequest.DONE)switch(a.Request.status){case 200:var i=a.Request.responseText;o(),t(),window.stop(),"true"==localStorage.__AEL__isHistory&&e({url:r,dataTime:(new Date).getTime()});var n=document.open("text/html","replace");n.write(i),n.close(),history.pushState({},null,r);break;case 400:a.onNotify("There was an error 400.");break;case 404:a.onNotify("Page not found.");break;case 0:a.onNotify("Connect is aborted.");break;default:alert()}},a.Request.open("GET",r,!0),a.Request.send()}var a=this;if(localStorage.hasOwnProperty("__AEL__isHistory")||(localStorage.__AEL__isHistory=!0),"true"!=localStorage.__AEL__isHistory||localStorage.hasOwnProperty("__AEL__History")||(localStorage.__AEL__History="[]",e({url:window.location.href,dataTime:(new Date).getTime()})),!window.hasOwnProperty("__AEL__globalVars")){window.__AEL__globalVars=new Array;for(i in window)window.__AEL__globalVars[i]=1}document.onclick=function(e){e=e||window.event;var t=e.target||e.srcElement;if("A"==t.tagName){var o=window.location.href,i=o.split(a.urlSeparator),n=t.href.split(a.urlSeparator);if(i.length>=3&&n.length>=3){var s=i[0]+"//"+i[2],l=n[0]+"//"+n[2];if(s!=l)return!0}else if(1==i.length&&1==n.length){if(i[0]!=n[0])return!0}else if(o!=t.href)return!0;return r(t.href),!1}}}},window.AEL.init();